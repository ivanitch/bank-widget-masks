# üè¶ Bank Widget Masks

–£—á–µ–±–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –¥–ª—è –∫—É—Ä—Å–∞ –ø–æ Python. –†–µ–∞–ª–∏–∑—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏—è –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö, –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–π –∏ —Ä–∞–±–æ—Ç—ã —Å
–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞–º–∏ –¥–ª—è –≤–∏–¥–∂–µ—Ç–∞ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–∞–Ω–∫–∞.

---

## üìã –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞

IT-–æ—Ç–¥–µ–ª –∫—Ä—É–ø–Ω–æ–≥–æ –±–∞–Ω–∫–∞ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–π –≤–∏–¥–∂–µ—Ç –¥–ª—è –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ –∫–ª–∏–µ–Ω—Ç–∞. –í–∏–¥–∂–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ –±–∞–Ω–∫–æ–≤—Å–∫–∏–µ
–æ–ø–µ—Ä–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞, –Ω–æ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:

1. **–ú–∞—Å–∫–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** - –Ω–æ–º–µ—Ä–∞ –∫–∞—Ä—Ç –∏ —Å—á–µ—Ç–æ–≤
2. **–§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏** - –ø–æ —Å—Ç–∞—Ç—É—Å—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ –≤–∞–ª—é—Ç–µ
3. **–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏** - –ø–æ –¥–∞—Ç–µ –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
4. **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞—Ç—ã** - –≤ –ø–æ–Ω—è—Ç–Ω—ã–π –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ñ–æ—Ä–º–∞—Ç
5. **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –±–æ–ª—å—à–∏–µ –æ–±—ä—ë–º—ã –¥–∞–Ω–Ω—ã—Ö** - —á–µ—Ä–µ–∑ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã

–ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ Python –¥–ª—è —Ä–µ—à–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á —Ñ–∏–Ω—Ç–µ—Ö-–∏–Ω–¥—É—Å—Ç—Ä–∏–∏ —Å —Å–æ–±–ª—é–¥–µ–Ω–∏–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤
–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö (PCI DSS).

---

## üéØ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –ú–æ–¥—É–ª—å `masks.py` - –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

- ‚úÖ **–ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –∫–∞—Ä—Ç—ã** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–µ—Ä–≤—ã–µ 6 –∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 4 —Ü–∏—Ñ—Ä—ã
- ‚úÖ **–ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ –±–∞–Ω–∫–æ–≤—Å–∫–æ–≥–æ —Å—á–µ—Ç–∞** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 4 —Ü–∏—Ñ—Ä—ã

### –ú–æ–¥—É–ª—å `widget.py` - –†–∞–±–æ—Ç–∞ —Å –≤–∏–¥–∂–µ—Ç–æ–º

- ‚úÖ **–ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç –∏ —Å—á–µ—Ç–æ–≤ —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º** - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å—Ç—Ä–æ–∫–∏ —Ç–∏–ø–∞ "Visa Platinum 7000792289606361"
- ‚úÖ **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç** - –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç ISO —Ñ–æ—Ä–º–∞—Ç –≤ —á–∏—Ç–∞–µ–º—ã–π –≤–∏–¥ (–î–î.–ú–ú.–ì–ì–ì–ì)

### –ú–æ–¥—É–ª—å `processing.py` - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π

- ‚úÖ **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ —Å—Ç–∞—Ç—É—Å—É** - –æ—Ç–±–æ—Ä –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ —Å–æ—Å—Ç–æ—è–Ω–∏—é (EXECUTED, CANCELED –∏ –¥—Ä.)
- ‚úÖ **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ –¥–∞—Ç–µ** - —É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏–µ –æ—Ç –Ω–æ–≤—ã—Ö –∫ —Å—Ç–∞—Ä—ã–º –∏–ª–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç

### –ú–æ–¥—É–ª—å `generators.py` - –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏

- ‚úÖ **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ –≤–∞–ª—é—Ç–µ** - —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –æ—Ç–±–æ—Ä –ø–æ –∫–æ–¥—É –≤–∞–ª—é—Ç—ã (USD, RUB, EUR)
- ‚úÖ **–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –æ–ø–∏—Å–∞–Ω–∏–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** - –ø–æ–æ—á–µ—Ä—ë–¥–Ω–∞—è –≤—ã–¥–∞—á–∞ –æ–ø–∏—Å–∞–Ω–∏–π –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ **–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –Ω–æ–º–µ—Ä–æ–≤ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –∫–∞—Ä—Ç** - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ XXXX XXXX XXXX XXXX

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
bank-widget-masks/
‚îÇ
‚îú‚îÄ‚îÄ src/                           # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py               # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞–∫–µ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ masks.py                  # –§—É–Ω–∫—Ü–∏–∏ –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ widget.py                 # –§—É–Ω–∫—Ü–∏–∏ –≤–∏–¥–∂–µ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ processing.py             # –§—É–Ω–∫—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ generators.py             # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏
‚îÇ
‚îú‚îÄ‚îÄ tests/                         # –¢–µ—Å—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py               # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞–∫–µ—Ç–∞ —Ç–µ—Å—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ test_masks.py             # –¢–µ—Å—Ç—ã –¥–ª—è masks
‚îÇ   ‚îú‚îÄ‚îÄ test_widget.py            # –¢–µ—Å—Ç—ã –¥–ª—è widget
‚îÇ   ‚îú‚îÄ‚îÄ test_processing.py        # –¢–µ—Å—Ç—ã –¥–ª—è processing
‚îÇ   ‚îî‚îÄ‚îÄ test_generators.py        # –¢–µ—Å—Ç—ã –¥–ª—è generators
‚îÇ
‚îú‚îÄ‚îÄ main.py                        # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª —Å –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–µ–π
‚îú‚îÄ‚îÄ pyproject.toml                # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Poetry –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
‚îú‚îÄ‚îÄ .flake8                       # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–∏–Ω—Ç–µ—Ä–∞
‚îú‚îÄ‚îÄ .gitignore                    # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è Git
‚îî‚îÄ‚îÄ README.md                     # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
```

---

## üíª –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Python**: 3.11 –∏–ª–∏ –≤—ã—à–µ
- **Poetry**: –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –®–∞–≥ 1: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone git@github.com:ivanitch/bank-widget-masks.git
cd bank-widget-masks
```

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ Poetry
poetry shell

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
poetry install
```

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö –∫–æ–º–∞–Ω–¥ Poetry:

- –°–æ–∑–¥–∞—Å—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (pytest, flake8, black, isort, mypy)
- –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç –ø—Ä–æ–µ–∫—Ç –∫ —Ä–∞–±–æ—Ç–µ

---

## üìö –û–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π

### –ú–æ–¥—É–ª—å `masks.py`

#### `get_mask_card_number(card_number: str) -> str`

–ú–∞—Å–∫–∏—Ä—É–µ—Ç –Ω–æ–º–µ—Ä –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –∫–∞—Ä—Ç—ã, –æ—Å—Ç–∞–≤–ª—è—è –≤–∏–¥–∏–º—ã–º–∏ –ø–µ—Ä–≤—ã–µ 6 –∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 4 —Ü–∏—Ñ—Ä—ã.

**–ü—Ä–∏–º–µ—Ä:**

```python
from src.masks import get_mask_card_number

card = "7000792289606361"
print(get_mask_card_number(card))  # 7000 79** **** 6361
```

#### `get_mask_account(account_number: str) -> str`

–ú–∞—Å–∫–∏—Ä—É–µ—Ç –Ω–æ–º–µ—Ä –±–∞–Ω–∫–æ–≤—Å–∫–æ–≥–æ —Å—á–µ—Ç–∞, –æ—Å—Ç–∞–≤–ª—è—è –≤–∏–¥–∏–º—ã–º–∏ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 4 —Ü–∏—Ñ—Ä—ã.

**–ü—Ä–∏–º–µ—Ä:**

```python
from src.masks import get_mask_account

account = "73654108430135874305"
print(get_mask_account(account))  # **4305
```

---

### –ú–æ–¥—É–ª—å `widget.py`

#### `mask_account_card(card_or_account: str) -> str`

–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏—è –∫–∞—Ä—Ç –∏ —Å—á–µ—Ç–æ–≤ –≤–º–µ—Å—Ç–µ —Å –∏—Ö –Ω–∞–∑–≤–∞–Ω–∏–µ–º.

**–ü—Ä–∏–º–µ—Ä—ã:**

```python
from src.widget import mask_account_card

print(mask_account_card("Visa Platinum 7000792289606361"))
# Visa Platinum 7000 79** **** 6361

print(mask_account_card("–°—á–µ—Ç 73654108430135874305"))
# –°—á–µ—Ç **4305
```

#### `get_date(date_string: str) -> str`

–ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –¥–∞—Ç—É –∏–∑ ISO 8601 —Ñ–æ—Ä–º–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç –î–î.–ú–ú.–ì–ì–ì–ì.

**–ü—Ä–∏–º–µ—Ä:**

```python
from src.widget import get_date

print(get_date("2024-03-11T02:26:18.671407"))  # 11.03.2024
```

---

### –ú–æ–¥—É–ª—å `processing.py`

#### `filter_by_state(data: list[dict], state: str = "EXECUTED") -> list[dict]`

–§–∏–ª—å—Ç—Ä—É–µ—Ç —Å–ø–∏—Å–æ–∫ –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ —Å—Ç–∞—Ç—É—Å—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

**–ü—Ä–∏–º–µ—Ä:**

```python
from src.processing import filter_by_state

operations = [
    {'id': 414288290, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29'},
    {'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25'}
]

executed = filter_by_state(operations, state='EXECUTED')
print(len(executed))  # 1
```

#### `sort_by_date(data: list[dict], reverse: bool = True) -> list[dict]`

–°–æ—Ä—Ç–∏—Ä—É–µ—Ç —Å–ø–∏—Å–æ–∫ –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ –¥–∞—Ç–µ.

**–ü—Ä–∏–º–µ—Ä:**

```python
from src.processing import sort_by_date

sorted_ops = sort_by_date(operations, reverse=True)  # –û—Ç –Ω–æ–≤—ã—Ö –∫ —Å—Ç–∞—Ä—ã–º
```

---

### –ú–æ–¥—É–ª—å `generators.py`

#### `filter_by_currency(transactions: list[dict], currency: str) -> Iterator[dict]`

–§–∏–ª—å—Ç—Ä—É–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ –∫–æ–¥—É –≤–∞–ª—é—Ç—ã –æ–ø–µ—Ä–∞—Ü–∏–∏. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç **–∏—Ç–µ—Ä–∞—Ç–æ—Ä**.

**–ü—Ä–∏–º–µ—Ä:**

```python
from src.generators import filter_by_currency

usd_transactions = filter_by_currency(transactions, 'USD')
for t in usd_transactions:
    print(t['id'])
```

---

#### `transaction_descriptions(transactions: list[dict]) -> Iterator[str]`

–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –æ–ø–∏—Å–∞–Ω–∏–π –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç **–∏—Ç–µ—Ä–∞—Ç–æ—Ä** —Å—Ç—Ä–æ–∫.

**–ü—Ä–∏–º–µ—Ä:**

```python
from src.generators import transaction_descriptions

descriptions = transaction_descriptions(transactions)
print(next(descriptions))  # –ü–µ—Ä–µ–≤–æ–¥ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
print(next(descriptions))  # –ü–µ—Ä–µ–≤–æ–¥ —Å –∫–∞—Ä—Ç—ã –Ω–∞ –∫–∞—Ä—Ç—É
```

---

#### `card_number_generator(start: int, stop: int) -> Iterator[str]`

–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –Ω–æ–º–µ—Ä–æ–≤ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –∫–∞—Ä—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ XXXX XXXX XXXX XXXX.

**–ü—Ä–∏–º–µ—Ä:**

```python
from src.generators import card_number_generator

for card in card_number_generator(1, 5):
    print(card)
# 0000 0000 0000 0001
# 0000 0000 0000 0002
# 0000 0000 0000 0003
# 0000 0000 0000 0004
# 0000 0000 0000 0005
```

**–î–∏–∞–ø–∞–∑–æ–Ω:** –æ—Ç 0000 0000 0000 0001 –¥–æ 9999 9999 9999 9999.

---

## üéÆ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π

```bash
python main.py
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å—Ç–∏—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é —Ä–∞–±–æ—Ç—ã –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π:

- –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç –∏ —Å—á–µ—Ç–æ–≤
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π
- –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –≤–∞–ª—é—Ç–µ
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–º–µ—Ä–æ–≤ –∫–∞—Ä—Ç

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
pytest tests/ -v

# –ó–∞–ø—É—Å–∫ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
pytest tests/ -v --cov=src --cov-report=html

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞
pytest tests/test_masks.py -v
pytest tests/test_generators.py -v
```

### –¢–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ

–ü—Ä–æ–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ unit-—Ç–µ—Å—Ç—ã:

- ‚úÖ **test_masks.py** - —Ç–µ—Å—Ç—ã –¥–ª—è –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ **test_widget.py** - —Ç–µ—Å—Ç—ã –¥–ª—è –≤–∏–¥–∂–µ—Ç–∞
- ‚úÖ **test_processing.py** - —Ç–µ—Å—Ç—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ **test_generators.py** - —Ç–µ—Å—Ç—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è –∫–æ–¥–∞ (PEP 8)
flake8 main.py src/

# –ê–≤—Ç–æ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
black main.py src/

# –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤
isort main.py src/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
mypy main.py src/
```

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π

```bash
flake8 main.py src/ && \
black --check main.py src/ && \
isort --check-only main.py src/ && \
mypy main.py src/ && \
pytest tests/ -v
```

–ò–ª–∏ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç:
```bash
./lint.sh
```

---

## üìñ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –†–∞–±–æ—Ç–∞ —Å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞–º–∏

```python
from src.generators import filter_by_currency, card_number_generator

# –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –≤–∞–ª—é—Ç–µ (–Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å—ë –≤ –ø–∞–º—è—Ç—å)
usd_transactions = filter_by_currency(all_transactions, 'USD')
for t in usd_transactions:
    print(f"USD –æ–ø–µ—Ä–∞—Ü–∏—è: {t['id']}")

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –Ω–æ–º–µ—Ä–æ–≤ –∫–∞—Ä—Ç
for card in card_number_generator(1, 100):
    print(card)  # 0000 0000 0000 0001, 0000 0000 0000 0002, ...
```

### –ü—Ä–∏–º–µ—Ä 2: –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥—É–ª–µ–π

```python
from src.widget import mask_account_card, get_date
from src.processing import filter_by_state, sort_by_date
from src.generators import filter_by_currency


# –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 USD-–æ–ø–µ—Ä–∞—Ü–∏–π —Å –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ–º
def get_recent_usd_operations(transactions, n=5):
    # –§–∏–ª—å—Ç—Ä—É–µ–º –ø–æ –≤–∞–ª—é—Ç–µ
    usd_ops = list(filter_by_currency(transactions, 'USD'))
    # –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –¥–∞—Ç–µ
    sorted_ops = sort_by_date(usd_ops, reverse=True)
    # –ë–µ—Ä—ë–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ N
    recent = sorted_ops[:n]

    # –í—ã–≤–æ–¥–∏–º —Å –º–∞—Å–∫–∏—Ä–æ–≤–∫–æ–π
    for op in recent:
        date = get_date(op['date'])
        card = mask_account_card(op.get('from', ''))
        print(f"{date} - {card}")
```

---

## üéì –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ –ø—Ä–æ–µ–∫—Ç–µ

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –Ω–∞–≤—ã–∫–∏:

- ‚úÖ –†–∞–±–æ—Ç–∞ —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏ (slicing, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- ‚úÖ –§—É–Ω–∫—Ü–∏–∏ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- ‚úÖ Type hints (–∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤)
- ‚úÖ –†–∞–±–æ—Ç–∞ —Å–æ —Å–ª–æ–≤–∞—Ä—è–º–∏ –∏ —Å–ø–∏—Å–∫–∞–º–∏
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
- ‚úÖ –†–∞–±–æ—Ç–∞ —Å –¥–∞—Ç–∞–º–∏ (–º–æ–¥—É–ª—å datetime)
- ‚úÖ **–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –∏ –∏—Ç–µ—Ä–∞—Ç–æ—Ä—ã (yield)**
- ‚úÖ **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –ø–∞–º—è—Ç—å—é**

### –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏:

- ‚úÖ –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (4 –º–æ–¥—É–ª—è)
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (docstrings)
- ‚úÖ Unit-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (50+ —Ç–µ—Å—Ç–æ–≤)
- ‚úÖ –§–∏–∫—Å—Ç—É—Ä—ã pytest
- ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤
- ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ PEP 8
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ (Poetry)
- ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å –≤–µ—Ä—Å–∏–π (Git)

---

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–æ–µ–∫—Ç —Å–ª–µ–¥—É–µ—Ç –ª—É—á—à–∏–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º –∑–∞—â–∏—Ç—ã –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:

- **PCI DSS Compliance** - –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É
- **–ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –º–∏–Ω–∏–º—É–º
- **–ù–µ —Ö—Ä–∞–Ω–∏–º** - —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **–¢–æ–ª—å–∫–æ –æ–±—Ä–∞–±–æ—Ç–∫–∞** - —Ñ–æ–∫—É—Å –Ω–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏, –∞ –Ω–µ —Ö—Ä–∞–Ω–µ–Ω–∏–∏
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** - –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç –≤—Å—ë –≤ –ø–∞–º—è—Ç—å

---

## üí° –ó–∞—á–µ–º –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã?

### –ü—Ä–æ–±–ª–µ–º–∞ —Å –æ–±—ã—á–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏:

```python
# ‚ùå –ó–∞–≥—Ä—É–∂–∞–µ—Ç –í–°–ï —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –ø–∞–º—è—Ç—å —Å—Ä–∞–∑—É
def get_all_usd(transactions):
    result = []
    for t in transactions:
        if t['currency'] == 'USD':
            result.append(t)
    return result  # –°–ø–∏—Å–æ–∫ –∏–∑ –º–∏–ª–ª–∏–æ–Ω–æ–≤ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –ø–∞–º—è—Ç–∏!
```

### –†–µ—à–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä:

```python
# ‚úÖ –í—ã–¥–∞—ë—Ç –ø–æ –æ–¥–Ω–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É, —ç–∫–æ–Ω–æ–º–∏—Ç –ø–∞–º—è—Ç—å
def filter_by_currency(transactions, currency):
    for t in transactions:
        if t['currency'] == currency:
            yield t  # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —ç–ª–µ–º–µ–Ω—Ç—ã –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**

- üöÄ –ú–µ–Ω—å—à–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–∞–º—è—Ç–∏
- ‚ö° –ù–∞—á–∏–Ω–∞–µ—Ç —Ä–∞–±–æ—Ç—É –º–≥–Ω–æ–≤–µ–Ω–Ω–æ (–Ω–µ –∂–¥—ë—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö)
- üîÑ –ú–æ–∂–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Python](https://docs.python.org/3/)
- [Poetry Documentation](https://python-poetry.org/docs/)
- [PEP 8 Style Guide](https://pep8.org/)
- [pytest Documentation](https://docs.pytest.org/)
- [PCI DSS Requirements](https://www.pcisecuritystandards.org/)
- [Python Testing with pytest (Brian Okken)](https://tisten.ir/blog/wp-content/uploads/2019/01/Python-Testing-with-pytest-Pragmatic-Bookshelf-2017-Brian-Okken.pdf)
- [Pytest-Cheatsheet](https://github.com/mananrg/Pytest-Cheatsheet)
- [–†–∞–∑–¥–µ–ª –ø—Ä–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Hitchhiker's Guide to Python](https://docs.python-guide.org/writing/tests/)

---

*–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω —Å ‚ù§Ô∏è –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è Python –∏ best practices —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏*
