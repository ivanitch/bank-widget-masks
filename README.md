# Bank Widget Masks

–£—á–µ–±–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –¥–ª—è –∫—É—Ä—Å–∞ –ø–æ Python. –†–µ–∞–ª–∏–∑—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏—è –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–π –¥–ª—è –≤–∏–¥–∂–µ—Ç–∞ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–∞–Ω–∫–∞.

---

## –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞

IT-–æ—Ç–¥–µ–ª –±–∞–Ω–∫–∞ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–π –≤–∏–¥–∂–µ—Ç –¥–ª—è –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ –∫–ª–∏–µ–Ω—Ç–∞. –í–∏–¥–∂–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ –±–∞–Ω–∫–æ–≤—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞, –Ω–æ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:

1. **–ú–∞—Å–∫–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** - –Ω–æ–º–µ—Ä–∞ –∫–∞—Ä—Ç –∏ —Å—á–µ—Ç–æ–≤
2. **–§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏** - –ø–æ —Å—Ç–∞—Ç—É—Å—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
3. **–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏** - –ø–æ –¥–∞—Ç–µ –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
4. **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞—Ç—ã** - –≤ –ø–æ–Ω—è—Ç–Ω—ã–π –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ñ–æ—Ä–º–∞—Ç

–ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ Python –¥–ª—è —Ä–µ—à–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á —Ñ–∏–Ω—Ç–µ—Ö-–∏–Ω–¥—É—Å—Ç—Ä–∏–∏ —Å —Å–æ–±–ª—é–¥–µ–Ω–∏–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö (PCI DSS).

---

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –ú–æ–¥—É–ª—å `masks.py` - –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

- ‚úÖ **–ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –∫–∞—Ä—Ç—ã** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–µ—Ä–≤—ã–µ 6 –∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 4 —Ü–∏—Ñ—Ä—ã
- ‚úÖ **–ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ –±–∞–Ω–∫–æ–≤—Å–∫–æ–≥–æ —Å—á–µ—Ç–∞** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 4 —Ü–∏—Ñ—Ä—ã

### –ú–æ–¥—É–ª—å `widget.py` - –†–∞–±–æ—Ç–∞ —Å –≤–∏–¥–∂–µ—Ç–æ–º

- ‚úÖ **–ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç –∏ —Å—á–µ—Ç–æ–≤ —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º** - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å—Ç—Ä–æ–∫–∏ —Ç–∏–ø–∞ "Visa Platinum 7000792289606361"
- ‚úÖ **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç** - –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç ISO —Ñ–æ—Ä–º–∞—Ç –≤ —á–∏—Ç–∞–µ–º—ã–π –≤–∏–¥ (–î–î.–ú–ú.–ì–ì–ì–ì)

### –ú–æ–¥—É–ª—å `processing.py` - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π

- ‚úÖ **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ —Å—Ç–∞—Ç—É—Å—É** - –æ—Ç–±–æ—Ä –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ —Å–æ—Å—Ç–æ—è–Ω–∏—é (EXECUTED, CANCELED –∏ –¥—Ä.)
- ‚úÖ **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ –¥–∞—Ç–µ** - —É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏–µ –æ—Ç –Ω–æ–≤—ã—Ö –∫ —Å—Ç–∞—Ä—ã–º –∏–ª–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
bank-widget-masks/
‚îÇ
‚îú‚îÄ‚îÄ src/                          # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py               # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞–∫–µ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ masks.py                  # –§—É–Ω–∫—Ü–∏–∏ –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ widget.py                 # –§—É–Ω–∫—Ü–∏–∏ –≤–∏–¥–∂–µ—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ processing.py             # –§—É–Ω–∫—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–π
‚îÇ
‚îú‚îÄ‚îÄ tests/                        # –¢–µ—Å—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py               # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞–∫–µ—Ç–∞ —Ç–µ—Å—Ç–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ main.py                       # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª —Å –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–µ–π
‚îú‚îÄ‚îÄ poetry.lock                   # –õ–æ–∫-—Ñ–∞–π–ª –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.
‚îú‚îÄ‚îÄ pyproject.toml                # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Poetry –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
‚îú‚îÄ‚îÄ .flake8                       # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–∏–Ω—Ç–µ—Ä–∞
‚îú‚îÄ‚îÄ .gitignore                    # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è Git
‚îî‚îÄ‚îÄ README.md                     # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
```

---

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Python**: 3.11 –∏–ª–∏ –≤—ã—à–µ
- **Poetry**: –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –®–∞–≥ 1: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone git@github.com:ivanitch/bank-widget-masks.git
cd bank-widget-masks
```

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ Poetry
poetry shell

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
poetry install
```

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö –∫–æ–º–∞–Ω–¥ Poetry:
- –°–æ–∑–¥–∞—Å—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (pytest, flake8, black, isort, mypy)
- –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç –ø—Ä–æ–µ–∫—Ç –∫ —Ä–∞–±–æ—Ç–µ

---

## –û–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π

### –ú–æ–¥—É–ª—å `masks.py`

#### `get_mask_card_number(card_number: str) -> str`

–ú–∞—Å–∫–∏—Ä—É–µ—Ç –Ω–æ–º–µ—Ä –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –∫–∞—Ä—Ç—ã, –æ—Å—Ç–∞–≤–ª—è—è –≤–∏–¥–∏–º—ã–º–∏ –ø–µ—Ä–≤—ã–µ 6 –∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 4 —Ü–∏—Ñ—Ä—ã.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `card_number` (str) - –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã (16 —Ü–∏—Ñ—Ä)

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
- `str` - –∑–∞–º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –Ω–æ–º–µ—Ä –≤ —Ñ–æ—Ä–º–∞—Ç–µ `XXXX XX** **** XXXX`

**–ü—Ä–∏–º–µ—Ä:**
```python
from src.masks import get_mask_card_number

card = "7000792289606361"
masked = get_mask_card_number(card)
print(masked)  # –í—ã–≤–æ–¥: 7000 79** **** 6361
```

---

#### `get_mask_account(account_number: str) -> str`

–ú–∞—Å–∫–∏—Ä—É–µ—Ç –Ω–æ–º–µ—Ä –±–∞–Ω–∫–æ–≤—Å–∫–æ–≥–æ —Å—á–µ—Ç–∞, –æ—Å—Ç–∞–≤–ª—è—è –≤–∏–¥–∏–º—ã–º–∏ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 4 —Ü–∏—Ñ—Ä—ã.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `account_number` (str) - –Ω–æ–º–µ—Ä —Å—á–µ—Ç–∞ (–æ–±—ã—á–Ω–æ 20 —Ü–∏—Ñ—Ä)

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
- `str` - –∑–∞–º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –Ω–æ–º–µ—Ä –≤ —Ñ–æ—Ä–º–∞—Ç–µ `**XXXX`

**–ü—Ä–∏–º–µ—Ä:**
```python
from src.masks import get_mask_account

account = "73654108430135874305"
masked = get_mask_account(account)
print(masked)  # –í—ã–≤–æ–¥: **4305
```

---

### –ú–æ–¥—É–ª—å `widget.py`

#### `mask_account_card(card_or_account: str) -> str`

–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏—è –∫–∞—Ä—Ç –∏ —Å—á–µ—Ç–æ–≤ –≤–º–µ—Å—Ç–µ —Å –∏—Ö –Ω–∞–∑–≤–∞–Ω–∏–µ–º.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `card_or_account` (str) - —Å—Ç—Ä–æ–∫–∞ —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –∏ –Ω–æ–º–µ—Ä–æ–º –∫–∞—Ä—Ç—ã/—Å—á–µ—Ç–∞

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
- `str` - –∑–∞–º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –Ω–∞–∑–≤–∞–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä—ã:**
```python
from src.widget import mask_account_card

# –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã
card = "Visa Platinum 7000792289606361"
print(mask_account_card(card))
# –í—ã–≤–æ–¥: Visa Platinum 7000 79** **** 6361

# –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—á–µ—Ç–∞
account = "–°—á–µ—Ç 73654108430135874305"
print(mask_account_card(account))
# –í—ã–≤–æ–¥: –°—á–µ—Ç **4305
```

---

#### `get_date(date_string: str) -> str`

–ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –¥–∞—Ç—É –∏–∑ ISO 8601 —Ñ–æ—Ä–º–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç –î–î.–ú–ú.–ì–ì–ì–ì.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `date_string` (str) - –¥–∞—Ç–∞ –≤ ISO —Ñ–æ—Ä–º–∞—Ç–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `2024-03-11T02:26:18.671407`)

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
- `str` - –¥–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `–î–î.–ú–ú.–ì–ì–ì–ì`

**–ü—Ä–∏–º–µ—Ä:**
```python
from src.widget import get_date

date_iso = "2024-03-11T02:26:18.671407"
formatted = get_date(date_iso)
print(formatted)  # –í—ã–≤–æ–¥: 11.03.2024
```

---

### –ú–æ–¥—É–ª—å `processing.py`

#### `filter_by_state(data: list[dict], state: str = "EXECUTED") -> list[dict]`

–§–∏–ª—å—Ç—Ä—É–µ—Ç —Å–ø–∏—Å–æ–∫ –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ —Å—Ç–∞—Ç—É—Å—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `data` (list[dict]) - —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤–∞—Ä–µ–π —Å –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏
- `state` (str) - —Å—Ç–∞—Ç—É—Å –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `'EXECUTED'`)

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
- `list[dict]` - –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –æ–ø–µ—Ä–∞—Ü–∏–π

**–ü—Ä–∏–º–µ—Ä:**
```python
from src.processing import filter_by_state

operations = [
    {'id': 414288290, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29'},
    {'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25'},
    {'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58'}
]

# –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
executed = filter_by_state(operations, state='EXECUTED')
print(f"–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π: {len(executed)}")  # –í—ã–≤–æ–¥: 2

# –ü–æ–ª—É—á–∏—Ç—å –æ—Ç–º–µ–Ω–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
canceled = filter_by_state(operations, state='CANCELED')
print(f"–û—Ç–º–µ–Ω–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π: {len(canceled)}")  # –í—ã–≤–æ–¥: 1
```

---

#### `sort_by_date(data: list[dict], reverse: bool = True) -> list[dict]`

–°–æ—Ä—Ç–∏—Ä—É–µ—Ç —Å–ø–∏—Å–æ–∫ –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ –¥–∞—Ç–µ.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `data` (list[dict]) - —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤–∞—Ä–µ–π —Å –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏
- `reverse` (bool) - –ø–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏:
  - `True` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) - –æ—Ç –Ω–æ–≤—ã—Ö –∫ —Å—Ç–∞—Ä—ã–º
  - `False` - –æ—Ç —Å—Ç–∞—Ä—ã—Ö –∫ –Ω–æ–≤—ã–º

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
- `list[dict]` - –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –æ–ø–µ—Ä–∞—Ü–∏–π

**–ü—Ä–∏–º–µ—Ä:**
```python
from src.processing import sort_by_date

operations = [
    {'id': 414288290, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29'},
    {'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58'},
    {'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33'}
]

# –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –æ—Ç –Ω–æ–≤—ã—Ö –∫ —Å—Ç–∞—Ä—ã–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
sorted_desc = sort_by_date(operations)
print(sorted_desc[0]['date'][:10])  # –í—ã–≤–æ–¥: 2019-07-03

# –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –æ—Ç —Å—Ç–∞—Ä—ã—Ö –∫ –Ω–æ–≤—ã–º
sorted_asc = sort_by_date(operations, reverse=False)
print(sorted_asc[0]['date'][:10])  # –í—ã–≤–æ–¥: 2018-06-30
```

---

## üéÆ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π

```bash
python main.py
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å—Ç–∏—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é —Ä–∞–±–æ—Ç—ã –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π:
- –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç –∏ —Å—á–µ—Ç–æ–≤
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π
- –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
======================================================================
–î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø –ú–û–î–£–õ–Ø WIDGET
======================================================================
–ò—Å—Ö–æ–¥–Ω–∞—è –∫–∞—Ä—Ç–∞: Visa Platinum 7000792289606361
–ó–∞–º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–∞—Ä—Ç–∞: Visa Platinum 7000 79** **** 6361

–ò—Å—Ö–æ–¥–Ω—ã–π —Å—á–µ—Ç: –°—á–µ—Ç 73654108430135874305
–ó–∞–º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å—á–µ—Ç: –°—á–µ—Ç **4305

–î–∞—Ç–∞ ISO: 2026-01-21T02:26:18.671407
–î–∞—Ç–∞ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∞: 21.01.2026

======================================================================
–î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø –ú–û–î–£–õ–Ø PROCESSING
======================================================================
–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ —Å—Ç–∞—Ç—É—Å—É
----------------------------------------------------------------------
–í—Å–µ–≥–æ –æ–ø–µ—Ä–∞—Ü–∏–π: 5
–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (EXECUTED): 3
–°–ø–∏—Å–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π:
  ‚Ä¢ ID: 414288290, –î–∞—Ç–∞: 03.07.2019, –°—Ç–∞—Ç—É—Å: EXECUTED
  ‚Ä¢ ID: 939719570, –î–∞—Ç–∞: 30.06.2018, –°—Ç–∞—Ç—É—Å: EXECUTED
  ‚Ä¢ ID: 142264268, –î–∞—Ç–∞: 04.04.2019, –°—Ç–∞—Ç—É—Å: EXECUTED
–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é (–æ—Ç —Å—Ç–∞—Ä—ã—Ö –∫ –Ω–æ–≤—ã–º):
  ‚Ä¢ –î–∞—Ç–∞: 30.06.2018, ID: 939719570, –°—Ç–∞—Ç—É—Å: EXECUTED
  ‚Ä¢ –î–∞—Ç–∞: 12.09.2018, ID: 594226727, –°—Ç–∞—Ç—É—Å: CANCELED
  ‚Ä¢ –î–∞—Ç–∞: 14.10.2018, ID: 615064591, –°—Ç–∞—Ç—É—Å: CANCELED
  ‚Ä¢ –î–∞—Ç–∞: 04.04.2019, ID: 142264268, –°—Ç–∞—Ç—É—Å: EXECUTED
  ‚Ä¢ –î–∞—Ç–∞: 03.07.2019, ID: 414288290, –°—Ç–∞—Ç—É—Å: EXECUTED
...
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞

### –õ–∏–Ω—Ç–∏–Ω–≥ (Flake8)

–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –∫–æ–¥—É —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É PEP 8:

```bash
flake8 main.py src/
```

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (Black)

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
black --check main.py src/

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
black main.py src/
```

### –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤ (isort)

–£–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–æ–≤:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
isort --check-only main.py src/

# –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤
isort main.py src/
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ (mypy)

–°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤:

```bash
mypy main.py src/
```

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π

```bash
flake8 main.py src/ && \
black --check main.py src/ && \
isort --check-only main.py src/ && \
mypy main.py src/
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ë–∞–∑–æ–≤–æ–µ –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ

```python
from src.masks import get_mask_card_number, get_mask_account

# –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã
card = "4532015112830366"
print(get_mask_card_number(card))  # 4532 01** **** 0366

# –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—á–µ—Ç–∞
account = "12345678901234567890"
print(get_mask_account(account))  # **7890
```

### –ü—Ä–∏–º–µ—Ä 2: –†–∞–±–æ—Ç–∞ —Å –≤–∏–¥–∂–µ—Ç–æ–º

```python
from src.widget import mask_account_card, get_date

# –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ
print(mask_account_card("MasterCard 5425233430109903"))
# MasterCard 5425 23** **** 9903

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã
print(get_date("2024-12-25T15:30:00.000000"))
# 25.12.2024
```

### –ü—Ä–∏–º–µ—Ä 3: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π

```python
from src.processing import filter_by_state, sort_by_date

operations = [
    {'id': 1, 'state': 'EXECUTED', 'date': '2024-01-15T10:00:00'},
    {'id': 2, 'state': 'CANCELED', 'date': '2024-01-10T09:00:00'},
    {'id': 3, 'state': 'EXECUTED', 'date': '2024-01-20T14:00:00'}
]

# –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
result = sort_by_date(
    filter_by_state(operations, 'EXECUTED'),
    reverse=True
)[:5]

print(f"–ù–∞–π–¥–µ–Ω–æ –æ–ø–µ—Ä–∞—Ü–∏–π: {len(result)}")
for op in result:
    print(f"  ID: {op['id']}, –î–∞—Ç–∞: {op['date'][:10]}")
```

### –ü—Ä–∏–º–µ—Ä 4: –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏

```python
from src.widget import mask_account_card, get_date
from src.processing import filter_by_state, sort_by_date

def display_recent_operations(operations, n=5):
    """–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ N –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π."""
    # –§–∏–ª—å—Ç—Ä—É–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ
    executed = filter_by_state(operations, 'EXECUTED')

    # –°–æ—Ä—Ç–∏—Ä—É–µ–º –æ—Ç –Ω–æ–≤—ã—Ö –∫ —Å—Ç–∞—Ä—ã–º
    sorted_ops = sort_by_date(executed, reverse=True)

    # –ë–µ—Ä–µ–º –ø–µ—Ä–≤—ã–µ N
    recent = sorted_ops[:n]

    # –í—ã–≤–æ–¥–∏–º —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
    print(f"\n–ü–æ—Å–ª–µ–¥–Ω–∏–µ {len(recent)} –æ–ø–µ—Ä–∞—Ü–∏–π:")
    for i, op in enumerate(recent, 1):
        date = get_date(op['date'])
        card = mask_account_card(op.get('description', 'N/A'))
        print(f"{i}. {date} - {card}")

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
all_operations = [...]  # –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ
display_recent_operations(all_operations, n=10)
```

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Python](https://docs.python.org/3/)
- [Poetry Documentation](https://python-poetry.org/docs/)
- [PEP 8 Style Guide](https://pep8.org/)
- [pytest Documentation](https://docs.pytest.org/)
- [PCI DSS Requirements](https://www.pcisecuritystandards.org/)

---

*–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω —Å ‚ù§Ô∏è –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è Python –∏ best practices —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏*
