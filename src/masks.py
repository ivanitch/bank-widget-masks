"""
Модуль для маскировки конфиденциальных банковских данных.

Содержит функции для безопасного отображения номеров банковских карт
и счетов, скрывая часть цифр для защиты конфиденциальной информации.
"""


def get_mask_card_number(card_number: str) -> str:
    """
    Маскирует номер банковской карты, оставляя видимыми первые 6 и последние 4 цифры.

    Функция принимает номер карты в виде строки цифр и возвращает замаскированный номер
    в формате: XXXX XX** **** XXXX, где X - видимые цифры, * - скрытые цифры.

    Аргументы:
        card_number (str): Номер банковской карты (16 цифр без пробелов).
                          Пример: "7000792289606361"

    Возвращает:
        str: Замаскированный номер карты в формате "XXXX XX** **** XXXX".
             Пример: "7000 79** **** 6361"

    Пример:
        >>> get_mask_card_number("7000792289606361")
    """

    # Приводим к строке
    str_cart_number = str(card_number)

    # Удаляем все пробелы
    clean_number = str_cart_number.replace(" ", "")

    # Проверяем, что номер содержит достаточно цифр
    if len(clean_number) < 16:
        raise ValueError(f"Номер карты должен содержать минимум 16 цифр, получено: {len(clean_number)}")

    # Извлекаем нужные части номера:
    # - первые 4 цифры (блок 1)
    # - следующие 2 цифры из второго блока (цифры 5-6)
    # - последние 4 цифры (блок 4)
    first_block = clean_number[:4]  # Первые 4 цифры: "7000"
    second_partial = clean_number[4:6]  # Следующие 2 цифры: "79"
    last_block = clean_number[-4:]  # Последние 4 цифры: "6361"

    masked_number = f"{first_block} {second_partial}** **** {last_block}"

    return masked_number


def get_mask_account(account_number: str) -> str:
    """
    Маскирует номер банковского счета, оставляя видимыми только последние 4 цифры.

    Функция принимает номер счета в виде строки цифр и возвращает замаскированный номер
    в формате: **XXXX, где X - последние 4 видимые цифры, * - скрытые цифры.

    Аргументы:
        account_number (str): Номер банковского счета (обычно 20 цифр).
                             Пример: "73654108430135874305"

    Возвращает:
        str: Замаскированный номер счета в формате "**XXXX".
             Пример: "**4305"

    Примеры:
        >>> get_mask_account("73654108430135874305")

    Примечания:
        - Функция работает с номерами счетов любой длины >= 4 цифр
        - Всегда скрывает все цифры, кроме последних 4
        - Две звездочки показывают наличие скрытых цифр
    """
    # Приводим к строке
    str_account_number = str(account_number)

    # Удаляем все пробелы
    clean_number = str_account_number.replace(" ", "")

    # Номер содержит минимум 4 цифры
    if len(clean_number) < 4:
        raise ValueError(f"Номер счета должен содержать минимум 4 цифры, получено: {len(clean_number)}")

    # Извлекаем последние 4 цифры
    last_four = clean_number[-4:]

    masked_account = f"**{last_four}"

    return masked_account
